/*
 * Parallax Ultra v1.4
 *
 * Copyright 2012-2013, LambertGroup
 * 
*/


(function(c){function U(a,b,e,g,f,z,l){b=c(b.attr("data-text-id")).children();var h,t,v=0;currentText_arr=[];l&&c(".newFS",f).contents().unwrap();b.each(function(){currentText_arr[v]=c(this);var b=currentText_arr[v];l&&"true"==b.attr("data-preanimate")?(b.css({display:"block"}),h=b.attr("data-final-left"),t=b.attr("data-final-top"),e.responsive&&(h=parseInt(h/(e.origWidth/e.width),10),t=parseInt(t/(e.origWidth/e.width),10)),b.css({left:h+"px",top:t+"px",opacity:1,display:"block"})):l?b.css({display:"none", opacity:0}):b.css({display:"block"});"true"!=b.attr("data-preanimate")&&(h=b.attr("data-initial-left"),t=b.attr("data-initial-top"),e.responsive&&(h=parseInt(h/(e.origWidth/e.width),10),t=parseInt(t/(e.origWidth/e.width),10)),b.css({left:h+"px",top:t+"px",opacity:parseInt(b.attr("data-fade-start"),10)/100}));l||(a.timeouts_arr[a.timeouts_arr.length]=setTimeout(function(){var f=N();e.responsive&&(newCss="",-1!=b.css("font-size").lastIndexOf("px")?(fontSize=b.css("font-size").substr(0,b.css("font-size").lastIndexOf("px")), newCss+="font-size:"+fontSize/(e.origWidth/e.width)+"px;"):-1!=b.css("font-size").lastIndexOf("em")&&(fontSize=b.css("font-size").substr(0,b.css("font-size").lastIndexOf("em")),newCss+="font-size:"+fontSize/(e.origWidth/e.width)+"em;"),-1!=b.css("line-height").lastIndexOf("px")?(lineHeight=b.css("line-height").substr(0,b.css("line-height").lastIndexOf("px")),newCss+="line-height:"+lineHeight/(e.origWidth/e.width)+"px;"):-1!=b.css("line-height").lastIndexOf("em")&&(lineHeight=b.css("line-height").substr(0, b.css("line-height").lastIndexOf("em")),newCss+="line-height:"+lineHeight/(e.origWidth/e.width)+"em;"),b.wrapInner('<div class="newFS" style="'+newCss+'" />'));var g,l,h;g=b.attr("data-final-left");l=b.attr("data-final-top");e.responsive&&(g=parseInt(g/(e.origWidth/e.width),10),l=parseInt(l/(e.origWidth/e.width),10));if("true"!=b.attr("data-preanimate")){var q=e.defaultEasing;""!=b.attr("data-easing")&&void 0!=b.attr("data-easing")&&(q=b.attr("data-easing"));h=1;!0==a.isVideoPlaying&&(h=0);-1!=f&& 9>f&&b.css({opacity:1});b.stop().animate({opacity:h,left:g+"px",top:l+"px"},1E3*b.attr("data-duration"),q,function(){!0==a.isVideoPlaying&&c(a.currentImg.attr("data-text-id")).children().css("opacity",0)})}else b.css({left:g+"px",top:l+"px",opacity:1})},1E3*b.attr("data-delay")));v++})}function Y(a,b,e,g){for(k=0;k<g;k++)e=c(a[k]),e=c(e.attr("data-text-id")).children(),currentText_arr=[],e.each(function(){currentText_arr[0]=c(this);var a=currentText_arr[0];if("true"==a.attr("data-preanimate")){a.css({display:"block"}); var e=a.attr("data-final-left"),g=a.attr("data-final-top");b.responsive&&(e=parseInt(e/(b.origWidth/b.width),10),g=parseInt(g/(b.origWidth/b.width),10));a.css({left:e+"px",top:g+"px",opacity:1})}else a.css({display:"none"})})}function O(a){if(a)for(var b in a)a[b]&&clearTimeout(a[b]);a.length=0}function J(a,b,e,g,f,z,l,h,t,v,B,n,C,F,I,q,K,w){var r=!0,u=!1,A;if(!e.loop&&b.current_img_no+a>=g||!e.loop&&0>b.current_img_no+a)r=!1;if(r&&!b.slideIsRunning&&b.firstLoadingComplete){b.slideIsRunning=!0;O(b.timeouts_arr); A=b.previous_current_img_no;c(b.currentImg.attr("data-text-id")).children().clearQueue();var r=c(b.currentImg.attr("data-text-id")).children(),p=0;currentText_arr=[];r.each(function(){currentText_arr[p]=c(this);var a=currentText_arr[p],d=e.defaultExitLeft;void 0!=a.attr("data-exit-left")&&""!=a.attr("data-exit-left")&&(d=parseInt(a.attr("data-exit-left")/(e.origWidth/e.width),10));var f=e.defaultExitTop;void 0!=a.attr("data-exit-top")&&""!=a.attr("data-exit-top")&&(f=parseInt(a.attr("data-exit-top")/ (e.origWidth/e.width),10));var g=e.defaultExitDuration;void 0!=a.attr("data-exit-duration")&&""!=a.attr("data-exit-duration")&&(g=parseFloat(a.attr("data-exit-duration")));var l=e.defaultExitDelay;void 0!=a.attr("data-exit-delay")&&""!=a.attr("data-exit-delay")&&(l=parseFloat(a.attr("data-exit-delay")));var h=e.defaultExitEasing;void 0!=a.attr("data-exit-easing")&&""!=a.attr("data-exit-easing")&&(h=a.attr("data-exit-easing"));var m=e.defaultExitOFF.toString();void 0!=a.attr("data-exit-off")&&""!= a.attr("data-exit-off")&&(m=a.attr("data-exit-off"));"true"==m&&(g=0);0<g&&parseInt(a.attr("data-final-top")/(e.origWidth/e.width),10)==parseInt(a.css("top").substr(0,a.css("top").lastIndexOf("px")),10)?b.timeouts_arr[b.timeouts_arr.length]=setTimeout(function(){a.stop().animate({left:d+"px",top:f+"px"},1E3*g,h,function(){"true"!=a.attr("data-preanimate")&&"false"==m?a.css({display:"none"}):(theLeft=a.attr("data-final-left"),theTop=a.attr("data-final-top"),e.responsive&&(theLeft=parseInt(theLeft/ (e.origWidth/e.width),10),theTop=parseInt(theTop/(e.origWidth/e.width),10)),a.css({left:theLeft+"px",top:theTop+"px",opacity:1}))})},1E3*l):"true"!=a.attr("data-preanimate")&&"false"==m&&a.css({display:"none"});p++});e.showCircleTimer&&(b.ctx.clearRect(0,0,b.canvas.width,b.canvas.height),b.ctx.beginPath(),b.ctx.globalAlpha=e.behindCircleAlpha/100,b.ctx.arc(e.circleRadius+2*e.circleLineWidth,e.circleRadius+2*e.circleLineWidth,e.circleRadius,0,2*Math.PI,!1),b.ctx.lineWidth=e.circleLineWidth+2,b.ctx.strokeStyle= e.behindCircleColor,b.ctx.stroke(),b.ctx.beginPath(),b.ctx.globalAlpha=e.circleAlpha/100,b.ctx.arc(e.circleRadius+2*e.circleLineWidth,e.circleRadius+2*e.circleLineWidth,e.circleRadius,0,0,!1),b.ctx.lineWidth=e.circleLineWidth,b.ctx.strokeStyle=e.circleColor,b.ctx.stroke());"bullets"==e.skin?c(f[b.current_img_no]).removeClass("bottomNavButtonON"):c(n[b.current_img_no]).removeClass("thumbsHolder_ThumbON");B.css("display","none");b.current_img_no+a>=g?(b.current_img_no=0,u=!0):b.current_img_no=0>b.current_img_no+ a?g-1:b.current_img_no+a;var d=u,L=N();if(0<e.bgArr.length){var m=0,H=0;c(".parallax_ultra_bgArr",v).each(function(){curBg=c(this);H="+="+(b.current_img_no-A)*parseInt(e.bgStep[m]/(e.origWidth/e.width),10);d&&(H=0);-1==L||-1!=L&&9<=L?curBg.stop().animate({"background-position":H},1E3*e.bgDuration[m],e.bgEasing[m],function(){}):curBg.animate({left:H},1E3*e.bgDuration[m],e.bgEasing[m],function(){});m++})}e.showBottomNav&&("bullets"==e.skin?(e.autoHideBottomNav||w.css("display","block"),c(f[b.current_img_no]).addClass("bottomNavButtonON")): (e.autoHideBottomNav||K.css("display","block"),c(n[b.current_img_no]).addClass("thumbsHolder_ThumbON"),currentCarouselLeft=C.css("left").substr(0,C.css("left").lastIndexOf("px")),0===b.current_img_no||b.current_img_no===g-1?R(0,C,F,I,e,g,q,b):R(1001,C,F,I,e,g,q,b)));b.currentImg=c(z[b.current_img_no]);t.animate({left:-1*b.current_img_no*e.width+"px"},1E3*e.scrollSlideDuration,e.scrollSlideEasing,function(){b.slideIsRunning=!1;b.arcInitialTime=(new Date).getTime();b.timeElapsed=0;"true"==c(z[b.current_img_no]).attr("data-video")&& B.css("display","block");"true"==c(z[b.previous_current_img_no]).attr("data-video")&&(c("#contentHolderUnit_"+b.previous_current_img_no,v).html(c(z[b.previous_current_img_no]).html()),S(b.previous_current_img_no,b,e,z,v,l,h));O(b.timeouts_arr);U(b,c(z[A]),e,l,v,h,!0);U(b,b.currentImg,e,l,v,h,!1);0<e.autoPlay&&(1<g&&!b.mouseOverBanner)&&(clearTimeout(b.timeoutID),b.timeoutID=setTimeout(function(){b.previous_current_img_no=b.current_img_no;J(1,b,e,g,f,z,l,h,t,v,B,n,C,F,I,q,K,w)},1E3*e.autoPlay))})}} function T(a,b,c,g,f){b=c.origImgsDimensions[b].split(";");g.responsive&&(b[0]/=g.origWidth/g.width,b[1]/=g.origWidth/g.width);a.width(b[0]);a.height(b[1]);f&&(g.width100Proc&&g.height100Proc)&&a.css({position:"relative",left:parseInt(g.width-a.width(),10)+"px",top:parseInt(g.height-a.height(),10)+"px"})}function S(a,b,e,g,f,z,l){e.responsive&&(imgInside=c("#contentHolderUnit_"+a,f).find("img:first"),null!=imgInside.width()&&T(imgInside,a,b,e,!0),textIdChildren=c(c(g[a]).attr("data-text-id")).children(), k=-1,textIdChildren.each(function(){k++;imgInside=c(this).find("img:first");null!=imgInside.width()&&T(imgInside,c(g[a]).attr("data-text-id")+"-"+k,b,e,!1)}),c(c(g[a]).attr("data-text-id")).css({width:e.width+"px",left:parseInt(a*e.width,10),top:l.css("top")}))}function R(a,b,c,g,f,z,l,h){currentCarouselLeft=b.css("left").substr(0,b.css("left").lastIndexOf("px"));1===a||-1===a?(h.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:"+="+a*h.carouselStep},500,"easeOutCubic",function(){Q(h, b,c,g,f,z,l);h.isCarouselScrolling=!1})):currentCarouselLeft!=-1*Math.floor(h.current_img_no/f.numberOfThumbsPerScreen)*h.carouselStep&&(h.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:-1*Math.floor(h.current_img_no/f.numberOfThumbsPerScreen)*h.carouselStep},500,"easeOutCubic",function(){Q(h,b,c,g,f,z,l);h.isCarouselScrolling=!1}))}function Q(a,b,c,g,f,z,l){currentCarouselLeft=b.css("left").substr(0,b.css("left").lastIndexOf("px"));0>currentCarouselLeft?c.hasClass("carouselLeftNavDisabled")&& c.removeClass("carouselLeftNavDisabled"):c.addClass("carouselLeftNavDisabled");Math.abs(currentCarouselLeft-a.carouselStep)<(l.width()+a.thumbMarginLeft)*z?g.hasClass("carouselRightNavDisabled")&&g.removeClass("carouselRightNavDisabled"):g.addClass("carouselRightNavDisabled")}function Z(a,b,e,g,f,z,l,h,t,v,B){"thumbs"==b.skin&&(B.css({bottom:parseInt(b.thumbsWrapperMarginBottom/(b.origWidth/b.width),10)+"px",top:"auto",height:parseInt(b.origthumbsHolderWrapperH/(b.origWidth/b.width),10)+"px"}),bgTopCorrection= 0,l.css("background-position","0px "+((B.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),h.css("background-position","0px "+((B.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),v.css("width",b.width-l.width()-h.width()),b.origWidthThumbsHolderVisibleWrapper=b.origWidth-l.width()-h.width(),f.css({width:parseInt(b.origThumbW/(b.origWidthThumbsHolderVisibleWrapper/v.width()),10)+"px",height:parseInt(b.origThumbH/(b.origWidthThumbsHolderVisibleWrapper/v.width()),10)+"px"}), b.numberOfThumbsPerScreen>=e&&v.css("left",parseInt((B.width()-(t.width()+a.thumbMarginLeft)*e)/2,10)+"px"),c(".thumbsHolder_ThumbOFF",g).find("img:first").css({width:f.width()+"px",height:f.height()+"px","margin-top":parseInt((B.height()-f.height())/2,10)+"px"}),a.thumbMarginLeft=Math.floor((B.width()-l.width()-h.width()-t.width()*b.numberOfThumbsPerScreen)/(b.numberOfThumbsPerScreen-1)),thumb_i=-1,z.children().each(function(){thumb_i++;theThumb=c(this);theThumb.css("background-position","center "+ b.thumbsOnMarginTop/(b.origWidth/b.width)+"px");0>=thumb_i?theThumb.css("margin-left",Math.floor((B.width()-l.width()-h.width()-(a.thumbMarginLeft+theThumb.width())*(b.numberOfThumbsPerScreen-1)-theThumb.width())/2)+"px"):theThumb.css("margin-left",a.thumbMarginLeft+"px")}),a.carouselStep=(t.width()+a.thumbMarginLeft)*b.numberOfThumbsPerScreen)}function N(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1)); return parseInt(a,10)}c.fn.parallax_ultra=function(a){a=c.extend({},c.fn.parallax_ultra.defaults,a);return this.each(function(){var b=c(this);responsiveWidth=b.parent().width();responsiveHeight=b.parent().height();a.responsiveRelativeToBrowser&&(responsiveWidth=c(window).width(),responsiveHeight=c(window).height());a.origWidth=a.width;a.width100Proc&&(a.width=responsiveWidth);a.origHeight=a.height;a.height100Proc&&(a.height=responsiveHeight);if(a.responsive&&(a.origWidth!=responsiveWidth||a.width100Proc))a.width= a.origWidth>responsiveWidth||a.width100Proc?responsiveWidth:a.origWidth,a.height100Proc||(a.height=a.width/(a.origWidth/a.origHeight));var e=c("<div></div>").addClass("parallax_ultra").addClass(a.skin),g=c('<div class="bannerControls"> <div class="leftNav"></div> <div class="rightNav"></div> </div> <div class="contentHolderVisibleWrapper"><div class="contentHolder"></div></div> <div class="playOver"></div> <div class="thumbsHolderWrapper"><div class="thumbsHolderVisibleWrapper"><div class="thumbsHolder"></div></div></div> <canvas class="mycanvas"></canvas>'); b.wrap(e);b.after(g);var f=b.parent(".parallax_ultra"),g=c(".bannerControls",f),z=c(".contentHolderVisibleWrapper",f),l=c(".contentHolder",f),e=c('<div class="bottomNavLeft"></div>'),h=c('<div class="bottomNav"></div>'),t=c('<div class="bottomNavRight"></div>');b.after(e);b.after(h);b.after(t);a.showAllControllers||g.css("display","none");var v=c(".leftNav",f),B=c(".rightNav",f);v.css("display","none");B.css("display","none");a.showNavArrows&&a.showOnInitNavArrows&&(v.css("display","block"),B.css("display", "block"));var n=c(".bottomNav",f),C=c(".bottomNavLeft",f),F=c(".bottomNavRight",f),I;n.css("display","block");C.css("display","block");F.css("display","block");n.css({bottom:parseInt(a.thumbsWrapperMarginBottom/(a.origWidth/a.width),10)+"px",top:"auto"});C.css({bottom:parseInt(a.thumbsWrapperMarginBottom/(a.origWidth/a.width),10)+"px",top:"auto"});F.css({bottom:parseInt(a.thumbsWrapperMarginBottom/(a.origWidth/a.width),10)+"px",top:"auto"});a.showBottomNav||(n.css("display","none"),C.css("display", "none"),F.css("display","none"));a.showOnInitBottomNav||(n.css("left","-5000px"),C.css("left","-5000px"),F.css("left","-5000px"));var q=c(".thumbsHolderWrapper",f),K=c(".thumbsHolderVisibleWrapper",f),w=c(".thumbsHolder",f),r,u;r=c('<div class="carouselLeftNav"></div>');u=c('<div class="carouselRightNav"></div>');q.append(r);q.append(u);u.css("right","0");w.css("width",r.width()+"px");(!a.showBottomNav||!a.showOnInitBottomNav)&&q.css({opacity:0,display:"none"});"thumbs"==a.skin&&q.css({bottom:parseInt(a.thumbsWrapperMarginBottom/ (a.origWidth/a.width),10)+"px",top:"auto"});a.enableTouchScreen&&(l.css({cursor:"url("+a.absUrl+"skins/hand.cur),url("+a.absUrl+"skins/hand.cur),move",left:"0px",top:"0px",position:"absolute"}),l.draggable({axis:"x",distance:10,disabled:!0,start:function(){origLeft=parseInt(c(this).css("left"),10);A.css("display","none");d.previous_current_img_no=d.current_img_no},stop:function(){d.slideIsRunning||(finalLeft=parseInt(c(this).css("left"),10),direction=1,origLeft<finalLeft&&(direction=-1),J(direction, d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n))}}));var A=c(".playOver",f);A.css({left:parseInt((a.width-A.width())/2,10)+"px",top:parseInt((a.height-A.height())/2,10)+"px"});c(".myloader",f).css({left:(a.width-c(".myloader",f).width())/2+"px",top:(a.height-c(".myloader",f).height())/2+"px"});var e=N(),p=0,d={current_img_no:0,currentImg:0,previous_current_img_no:0,slideIsRunning:!1,mouseOverBanner:!1,isVideoPlaying:!1,carouselStep:0,thumbMarginLeft:0,timeoutID:"",intervalID:"",arcInitialTime:(new Date).getTime(), timeElapsed:0,windowWidth:0,origImgsDimensions:[],firstLoadingComplete:!1,canvas:"",ctx:"",timeouts_arr:[],bannerRatio:a.origWidth/a.origHeight},L=0;d.canvas=c(".mycanvas",f)[0];d.canvas.width=2*a.circleRadius+4*a.circleLineWidth;d.canvas.height=2*a.circleRadius+4*a.circleLineWidth;-1!=e&&9>e&&(a.showCircleTimer=!1);a.showCircleTimer&&(d.ctx=d.canvas.getContext("2d"));f.width(a.width);f.height(a.height);z.width(a.width);z.height(a.height);l.width(a.width);l.height(a.height);g.css("margin-top",parseInt((a.height- v.height())/2,10)+"px");var m=b.find("ul:first").children(),H,V=0,E,y,P=0,O=0,D;m.each(function(){d.currentImg=c(this);d.currentImg.is("li")||(d.currentImg=d.currentImg.find("li:first"));if(d.currentImg.is("li")){p++;H=c('<div class="contentHolderUnit" rel="'+(p-1)+'" id="contentHolderUnit_'+(p-1)+'">'+d.currentImg.html()+"</div>");H.width(a.width);H.height(a.height);l.append(H);V+=a.width;D=c("#contentHolderUnit_"+(p-1),f).find("img:first");null!=D.width()?(d.origImgsDimensions[p-1]=D.width()+";"+ D.height(),a.responsive&&a.origWidth!=responsiveWidth&&T(D,p-1,d,a,!0)):d.origImgsDimensions[p-1]=null;"bullets"==a.skin?(E=c('<div class="bottomNavButtonOFF" rel="'+(p-1)+'"></div>'),n.append(E),P+=parseInt(E.css("padding-left").substring(0,E.css("padding-left").length-2),10)+E.width(),O=parseInt((n.height()-parseInt(E.css("height").substring(0,E.css("height").length-2)))/2,10),E.css("margin-top",O+"px")):(image_name=c(m[p-1]).attr("data-bottom-thumb"),y=c('<div class="thumbsHolder_ThumbOFF" rel="'+ (p-1)+'"><img src="'+image_name+'"></div>'),w.append(y),0==a.origThumbW&&(0==a.numberOfThumbsPerScreen&&(a.numberOfThumbsPerScreen=Math.floor((a.origWidth-r.width()-u.width())/y.width())),a.origThumbW=y.width(),a.origThumbH=y.height(),a.origthumbsHolderWrapperH=q.height(),d.thumbMarginLeft=Math.floor((a.origWidth-r.width()-u.width()-y.width()*a.numberOfThumbsPerScreen)/(a.numberOfThumbsPerScreen-1))),w.css("width",w.width()+d.thumbMarginLeft+y.width()+"px"),thumbsHolder_MarginTop=parseInt((q.height()- parseInt(y.css("height").substring(0,y.css("height").length-2)))/2,10));l.append(c(d.currentImg.attr("data-text-id")));c(d.currentImg.attr("data-text-id")).css({width:a.width+"px",height:"100%",overflow:"hidden",left:parseInt((p-1)*a.width,10),top:g.css("top")});var b=-1;c(d.currentImg.attr("data-text-id")).children().each(function(){b++;D=c(this).find("img:first");null!=D.width()?(d.origImgsDimensions[d.currentImg.attr("data-text-id")+"-"+b]=D.width()+";"+D.height(),a.responsive&&a.origWidth!=responsiveWidth&& T(D,d.currentImg.attr("data-text-id")+"-"+b,d,a,!1)):d.origImgsDimensions[d.currentImg.attr("data-text-id")+"-"+b]=null})}});l.width(V);"bullets"==a.skin?(n.width(P),a.showOnInitBottomNav&&(n.css("left",parseInt((f.width()-P)/2,10)+"px"),C.css("left",parseInt(n.css("left").substring(0,n.css("left").length-2),10)-C.width()+"px"),F.css("left",parseInt(n.css("left").substring(0,n.css("left").length-2),10)+n.width()+parseInt(E.css("padding-left").substring(0,E.css("padding-left").length-2),10)+"px"))): (K.css({width:a.origWidth-r.width()-u.width(),left:r.width()+"px"}),d.carouselStep=(y.width()+d.thumbMarginLeft)*a.numberOfThumbsPerScreen,r.addClass("carouselLeftNavDisabled"),a.numberOfThumbsPerScreen>=p&&(u.addClass("carouselRightNavDisabled"),r.css("display","none"),u.css("display","none"),K.css("left",parseInt((q.width()-(y.width()+d.thumbMarginLeft)*p)/2,10)+"px")),c(".thumbsHolder_ThumbOFF",f).find("img:first").css("margin-top",thumbsHolder_MarginTop+"px"),a.origthumbsHolder_MarginTop=thumbsHolder_MarginTop); thumbsHolder_Thumbs=c(".thumbsHolder_ThumbOFF",f);Z(d,a,p,f,thumbsHolder_Thumbs,w,r,u,y,K,q);var s=a,h=p,e=N();if(0<s.bgArr.length){var M=0,t=0;bg_aux='<div class="parallax_ultra_all_bgArr">';for(x in s.bgArr){if(-1==e||-1!=e&&9<=e)bg_aux+='<div class="parallax_ultra_bgArr" style="background:url('+s.bgArr[x]+") repeat-x; width:"+s.width+"px; height:"+s.height+'px; left:0px"></div>';else{bg_aux+='<div class="parallax_ultra_bgArr" style="left:'+-1*h*s.width+"px; width:"+3*h*s.width+"px; height:"+s.height+ 'px;">';for(var t=Math.round(3*h*s.width/parseInt(s.bgIEWidth[M]/(s.origWidth/s.width),10)+0.5),Q=0;Q<t;Q++)bg_aux+='<div class="parallax_ultra_bgArr_unit_IE78" style="width:'+parseInt(s.bgIEWidth[M]/(s.origWidth/s.width),10)+"px;height:"+s.height+'px;">&nbsp;</div>';bg_aux+="</div>"}M++}bg_aux+="</div>";b.append(bg_aux);c(".parallax_ultra_all_bgArr",f).css({width:s.width+"px",height:s.height+"px"});h=c(".parallax_ultra_bgArr",f);parseInt(100*s.height/s.origHeight,10);-1==e||-1!=e&&9<=e?h.css({"-webkit-background-size":"contain", "-moz-background-size":"contain","-o-background-size":"contain","-ms-background-size":"contain","background-size":"contain"}):(M=0,h.each(function(){curBg=c(this);curBg.children().css({"-ms-filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+s.bgArr[M]+"', sizingMethod='scale')",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+s.bgArr[M]+"', sizingMethod='scale')"});M++}))}c("iframe",f).each(function(){var a=c(this).attr("src"),b="?wmode=transparent";-1!=a.indexOf("?")&& (b="&wmode=transparent");c(this).attr("src",a+b)});d.current_img_no=0;d.currentImg=c(m[0]);f.mouseenter(function(){a.pauseOnMouseOver&&(1<p&&d.firstLoadingComplete)&&(d.mouseOverBanner=!0,clearTimeout(d.timeoutID),nowx=(new Date).getTime(),d.timeElapsed+=nowx-d.arcInitialTime);a.autoHideNavArrows&&a.showNavArrows&&(v.css("display","block"),B.css("display","block"));a.autoHideBottomNav&&a.showBottomNav&&("bullets"==a.skin?(n.css({display:"block",left:parseInt((f.width()-P)/2,10)+"px"}),C.css({display:"block", left:parseInt(n.css("left").substring(0,n.css("left").length-2),10)-C.width()+"px"}),F.css({display:"block",left:parseInt(n.css("left").substring(0,n.css("left").length-2),10)+n.width()+parseInt(E.css("padding-left").substring(0,E.css("padding-left").length-2),10)+"px"})):!(0>a.thumbsWrapperMarginBottom&&d.isVideoPlaying)&&a.showBottomNav&&(q.css({display:"block"}),q.stop().animate({opacity:1},500,"swing",function(){})))});f.mouseleave(function(){a.pauseOnMouseOver&&(1<p&&d.firstLoadingComplete)&& (d.mouseOverBanner=!1);a.autoHideNavArrows&&a.showNavArrows&&(v.css("display","none"),B.css("display","none"));a.autoHideBottomNav&&a.showBottomNav&&("bullets"==a.skin?(n.css("display","none"),C.css("display","none"),F.css("display","none")):q.stop().animate({opacity:0},300,"swing",function(){}));if(0<a.autoPlay&&1<p&&!d.isVideoPlaying&&a.pauseOnMouseOver&&d.firstLoadingComplete){clearTimeout(d.timeoutID);nowx=(new Date).getTime();d.arcInitialTime=(new Date).getTime();var c=parseInt(1E3*a.autoPlay- (d.timeElapsed+nowx-d.arcInitialTime),10);d.timeoutID=setTimeout(function(){J(1,d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n)},c)}});H=c(".contentHolderUnit",l);H.click(function(){var b=c(this).attr("rel");"true"==c(m[d.current_img_no]).attr("data-video")&&(b!=d.current_img_no?d.isVideoPlaying=!1:(clearTimeout(d.timeoutID),D=c(this).find("img:first"),D.css("display","none"),A.css("display","none"),d.isVideoPlaying=!0,"thumbs"==a.skin&&a.thumbsWrapperMarginBottom>-1*a.origthumbsHolderWrapperH&& q.css("display","none"),"bullets"==a.skin&&0<=a.thumbsWrapperMarginBottom&&n.css("display","none")));void 0!=c(m[d.current_img_no]).attr("data-link")&&(b==d.current_img_no&&""!=c(m[d.current_img_no]).attr("data-link"))&&(b=a.target,void 0!=c(m[d.current_img_no]).attr("data-target")&&""!=c(m[d.current_img_no]).attr("data-target")&&(b=c(m[d.current_img_no]).attr("data-target")),"_blank"==b?window.open(c(m[d.current_img_no]).attr("data-link")):window.location=c(m[d.current_img_no]).attr("data-link"))}); A.click(function(){A.css("display","none");clearTimeout(d.timeoutID);D=c("#contentHolderUnit_"+d.current_img_no,f).find("img:first");D.css("display","none");d.isVideoPlaying=!0;"thumbs"==a.skin&&a.thumbsWrapperMarginBottom>-1*a.origthumbsHolderWrapperH&&q.css("display","none");"bullets"==a.skin&&0<=a.thumbsWrapperMarginBottom&&n.css("display","none")});c(".parallax_ultra_texts",f).click(function(){if(void 0!=c(m[d.current_img_no]).attr("data-link")&&""!=c(m[d.current_img_no]).attr("data-link")&&!d.slideIsRunning){var b= a.target;void 0!=c(m[d.current_img_no]).attr("data-target")&&""!=c(m[d.current_img_no]).attr("data-target")&&(b=c(m[d.current_img_no]).attr("data-target"));"_blank"==b?window.open(c(m[d.current_img_no]).attr("data-link")):window.location=c(m[d.current_img_no]).attr("data-link")}});v.click(function(){d.slideIsRunning||(d.isVideoPlaying=!1,d.previous_current_img_no=d.current_img_no,clearTimeout(d.timeoutID),J(-1,d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n))});B.click(function(){d.slideIsRunning|| (d.isVideoPlaying=!1,d.previous_current_img_no=d.current_img_no,clearTimeout(d.timeoutID),J(1,d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n))});var X=!1;c(window).resize(function(){var e=N();doResizeNow=!0;-1!=navigator.userAgent.indexOf("Android")&&(0==a.windowOrientationScreenSize0&&0==window.orientation&&(a.windowOrientationScreenSize0=c(window).width()),0==a.windowOrientationScreenSize90&&90==window.orientation&&(a.windowOrientationScreenSize90=c(window).height()),0==a.windowOrientationScreenSize_90&& -90==window.orientation&&(a.windowOrientationScreenSize_90=c(window).height()),a.windowOrientationScreenSize0&&(0==window.orientation&&c(window).width()>a.windowOrientationScreenSize0)&&(doResizeNow=!1),a.windowOrientationScreenSize90&&(90==window.orientation&&c(window).height()>a.windowOrientationScreenSize90)&&(doResizeNow=!1),a.windowOrientationScreenSize_90&&(-90==window.orientation&&c(window).height()>a.windowOrientationScreenSize_90)&&(doResizeNow=!1),0==d.windowWidth&&(doResizeNow=!1,d.windowWidth= c(window).width()));-1!=e&&(9==e&&0==d.windowWidth)&&(doResizeNow=!1);d.windowWidth==c(window).width()?(doResizeNow=!1,a.windowCurOrientation!=window.orientation&&-1!=navigator.userAgent.indexOf("Android")&&(a.windowCurOrientation=window.orientation,doResizeNow=!0)):d.windowWidth=c(window).width();a.responsive&&doResizeNow&&(!1!==X&&clearTimeout(X),X=setTimeout(function(){var e=d,j=a,h=p,W=m,s=g,t=A,B=G,C=thumbsHolder_Thumbs,D=y;responsiveWidth=b.parent().parent().width();responsiveHeight=b.parent().parent().height(); j.responsiveRelativeToBrowser&&(responsiveWidth=c(window).width(),responsiveHeight=c(window).height());j.width100Proc&&(j.width=responsiveWidth);j.height100Proc&&(j.height=responsiveHeight);if(j.origWidth!=responsiveWidth||j.width100Proc){j.origWidth>responsiveWidth||j.width100Proc?j.width=responsiveWidth:j.width100Proc||(j.width=j.origWidth);j.height100Proc||(j.height=j.width/e.bannerRatio);f.width(j.width);f.height(j.height);z.width(j.width);z.height(j.height);l.width(j.width);l.height(j.height); s.css("margin-top",parseInt((j.height-v.height())/2,10)+"px");Y(W,j,b,h);contentHolderUnit=c(".contentHolderUnit",f);contentHolderUnit.width(j.width);contentHolderUnit.height(j.height);holderWidth=j.width*h;for(i=0;i<h;i++)S(i,e,j,W,f,b,s);l.width(holderWidth);"bullets"==j.skin?0<=j.thumbsWrapperMarginBottom?n.css({left:parseInt((f.width()-n.width())/2,10)+"px",bottom:parseInt(j.thumbsWrapperMarginBottom/(j.origWidth/j.width),10)+"px",top:"auto"}):n.css({left:parseInt((f.width()-n.width())/2,10)+ "px"}):Z(e,j,h,f,C,w,r,u,D,K,q);t.css({left:parseInt((j.width-t.width())/2,10)+"px",top:parseInt((j.height-t.height())/2,10)+"px"});clearTimeout(e.timeoutID);var E=N();if(0<j.bgArr.length){c(".parallax_ultra_all_bgArr",f).css({width:j.width+"px",height:j.height+"px"});var F=c(".parallax_ultra_bgArr",f);F.each(function(){curBg=c(this);curBg.css({width:3*h*j.width+"px",height:j.height+"px",left:-1*h*j.width+e.current_img_no*j.bgStep[i]+"px"})});j.responsive&&(parseInt(100*j.height/j.origHeight,10), -1==E||-1!=E&&9<=E?F.css({"-webkit-background-size":"contain","-moz-background-size":"contain","-o-background-size":"contain","-ms-background-size":"contain","background-size":"contain"}):(i=0,F.each(function(){curBg=c(this);curBg.children().css({width:parseInt(j.bgIEWidth[i]/(j.origWidth/j.width),10)+"px",height:j.height+"px","-ms-filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+j.bgArr[i]+"', sizingMethod='scale')",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ j.bgArr[i]+"', sizingMethod='scale')"});i++})))}J(1,e,j,h,B,W,b,s,l,f,t,C,w,r,u,D,q,n)}},300))});if("bullets"==a.skin){var G=c(".bottomNavButtonOFF",f);G.click(function(){if(!d.slideIsRunning&&d.firstLoadingComplete){d.isVideoPlaying=!1;var e=c(this).attr("rel");d.current_img_no!=e&&(c(G[d.current_img_no]).removeClass("bottomNavButtonON"),d.previous_current_img_no=d.current_img_no,"true"==c(m[d.previous_current_img_no]).attr("data-video")&&(c("#contentHolderUnit_"+d.previous_current_img_no,f).html(c(m[d.previous_current_img_no]).html()), S(d.previous_current_img_no,d,a,m,f,b,g)),d.current_img_no=e-1,J(1,d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n))}});G.mouseenter(function(){var b=c(this),d=b.attr("rel");if(a.showPreviewThumbs){I=c('<div class="bottomOverThumb"></div>');b.append(I);var e=c(m[d]).attr("data-bottom-thumb"),f=c(m[L]).attr("data-bottom-thumb"),g=80,h=-80;L>d&&(g=-80,h=80);I.html("");I.html('<div class="innerBottomOverThumb"><img src="'+f+'"style="margin:0px;" id="oldThumb"><img src="'+e+'" style="margin-top:-80px; margin-left:'+ g+'px;" id="newThumb"></div>');c("#newThumb").stop().animate({marginLeft:"0px"},150,function(){I.html('<div class="innerBottomOverThumb"><img src="'+e+'"></div>')});c("#oldThumb").stop().animate({marginLeft:h+"px"},150,function(){});L=d}b.addClass("bottomNavButtonON")});G.mouseleave(function(){var b=c(this),e=b.attr("rel");a.showPreviewThumbs&&I.remove();d.current_img_no!=e&&b.removeClass("bottomNavButtonON")})}thumbsHolder_Thumbs.mousedown(function(){arrowClicked=!0;if(!d.effectIsRunning&&d.firstLoadingComplete){d.isVideoPlaying= !1;var e=c(this).attr("rel");d.current_img_no!=e&&(c(thumbsHolder_Thumbs[d.current_img_no]).removeClass("thumbsHolder_ThumbON"),d.previous_current_img_no=d.current_img_no,"true"==c(m[d.previous_current_img_no]).attr("data-video")&&(c("#contentHolderUnit_"+d.previous_current_img_no,f).html(c(m[d.previous_current_img_no]).html()),S(d.previous_current_img_no,d,a,m,f,b,g)),d.bottomNavClicked=!0,d.current_img_no=e-1,J(1,d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n))}});thumbsHolder_Thumbs.mouseup(function(){arrowClicked= !1});thumbsHolder_Thumbs.mouseenter(function(){var a=c(this);a.attr("rel");a.addClass("thumbsHolder_ThumbON")});thumbsHolder_Thumbs.mouseleave(function(){var a=c(this),b=a.attr("rel");d.current_img_no!=b&&a.removeClass("thumbsHolder_ThumbON")});r.click(function(){d.isCarouselScrolling||(currentCarouselLeft=w.css("left").substr(0,w.css("left").lastIndexOf("px")),0>currentCarouselLeft&&R(1,w,r,u,a,p,y,d))});u.click(function(){d.isCarouselScrolling||(currentCarouselLeft=w.css("left").substr(0,w.css("left").lastIndexOf("px")), Math.abs(currentCarouselLeft-d.carouselStep)<(y.width()+d.thumbMarginLeft)*p&&R(-1,w,r,u,a,p,y,d))});"bullets"==a.skin?c(G[d.current_img_no]).addClass("bottomNavButtonON"):c(thumbsHolder_Thumbs[d.current_img_no]).addClass("thumbsHolder_ThumbON");setTimeout(function(){c(".myloader",f).css("display","none");Y(m,a,b,p);d.firstLoadingComplete=!0;a.enableTouchScreen&&l.draggable("option","disabled",!1);d.arcInitialTime=(new Date).getTime();d.mouseOverBanner=!1;d.timeElapsed=0;U(d,d.currentImg,a,b,f,g, !1,d.current_img_no);0<a.autoPlay&&1<p&&(a.showCircleTimer&&(d.intervalID=setInterval(function(){var b=d,c=a;nowx=(new Date).getTime();!b.mouseOverBanner&&(!b.effectIsRunning&&c.showCircleTimer&&!b.slideIsRunning)&&(b.ctx.clearRect(0,0,b.canvas.width,b.canvas.height),b.ctx.beginPath(),b.ctx.globalAlpha=c.behindCircleAlpha/100,b.ctx.arc(c.circleRadius+2*c.circleLineWidth,c.circleRadius+2*c.circleLineWidth,c.circleRadius,0,2*Math.PI,!1),b.ctx.lineWidth=c.circleLineWidth+2,b.ctx.strokeStyle=c.behindCircleColor, b.ctx.stroke(),b.ctx.beginPath(),b.ctx.globalAlpha=c.circleAlpha/100,b.ctx.arc(c.circleRadius+2*c.circleLineWidth,c.circleRadius+2*c.circleLineWidth,c.circleRadius,0,2*((b.timeElapsed+nowx-b.arcInitialTime)/1E3)/c.autoPlay*Math.PI,!1),b.ctx.lineWidth=c.circleLineWidth,b.ctx.strokeStyle=c.circleColor,b.ctx.stroke())},125)),d.timeoutID=setTimeout(function(){J(1,d,a,p,G,m,b,g,l,f,A,thumbsHolder_Thumbs,w,r,u,y,q,n)},1E3*a.autoPlay))},1E3*a.myloaderTime);"true"==c(m[d.current_img_no]).attr("data-video")&& A.css("display","block")})};c.fn.parallax_ultra.defaults={skin:"bullets",width:918,height:382,width100Proc:!1,height100Proc:!1,autoPlay:7,loop:!0,target:"_blank",absUrl:"",showAllControllers:!0,showNavArrows:!0,showOnInitNavArrows:!0,autoHideNavArrows:!0,showBottomNav:!0,showOnInitBottomNav:!0,autoHideBottomNav:!0,showPreviewThumbs:!0,enableTouchScreen:!0,pauseOnMouseOver:!0,showCircleTimer:!0,showCircleTimerIE8IE7:!1,circleRadius:10,circleLineWidth:4,circleColor:"#FF0000",circleAlpha:100,behindCircleColor:"#000000", behindCircleAlpha:50,responsive:!1,responsiveRelativeToBrowser:!0,thumbsWrapperMarginBottom:-35,scrollSlideDuration:0.8,scrollSlideEasing:"easeOutQuad",numberOfThumbsPerScreen:0,thumbsOnMarginTop:10,defaultEasing:"swing",myloaderTime:4,defaultExitLeft:0,defaultExitTop:0,defaultExitDuration:0,defaultExitDelay:0,defaultExitEasing:"swing",defaultExitOFF:!1,bgArr:[],bgIEWidth:[],bgStep:[],bgEasing:[],bgDuration:[],origWidth:0,origHeight:0,origThumbW:0,origThumbH:0,origthumbsHolderWrapperH:0,origWidthThumbsHolderVisibleWrapper:0, windowOrientationScreenSize0:0,windowOrientationScreenSize90:0,windowOrientationScreenSize_90:0,windowCurOrientation:0}})(jQuery);